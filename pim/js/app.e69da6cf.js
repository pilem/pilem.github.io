(function(e){function t(t){for(var o,s,i=t[0],c=t[1],l=t[2],u=0,m=[];u<i.length;u++)s=i[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&m.push(r[s][0]),r[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);d&&d(t);while(m.length)m.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},a=[];function s(e){return i.p+"js/"+({"contacts~finances~forms~inventory~logbook~messages~notes~tasks":"contacts~finances~forms~inventory~logbook~messages~notes~tasks","contacts~finances~inventory~messages~notes~tasks":"contacts~finances~inventory~messages~notes~tasks","contacts~forms~logbook~tasks":"contacts~forms~logbook~tasks",contacts:"contacts","finances~inventory~tasks":"finances~inventory~tasks",tasks:"tasks",finances:"finances",inventory:"inventory",messages:"messages",notes:"notes","forms~logbook":"forms~logbook",forms:"forms",logbook:"logbook",dashboard:"dashboard",maps:"maps",search:"search",settings:"settings",setup:"setup",themes:"themes",tools:"tools"}[e]||e)+"."+{"contacts~finances~forms~inventory~logbook~messages~notes~tasks":"5dd24aa6","contacts~finances~inventory~messages~notes~tasks":"df99fe5d","contacts~forms~logbook~tasks":"3ba623bf",contacts:"5241d8c5","finances~inventory~tasks":"712b9f00",tasks:"27899148",finances:"b82486ae",inventory:"dfcb27c1",messages:"02baa9ae",notes:"a1ebab2c","forms~logbook":"53c9cba0",forms:"cfd43b83",logbook:"eebe23d6",dashboard:"fc31fa42",maps:"58aaff51",search:"8c8b3097",settings:"5df5134a",setup:"be960464",themes:"d5fd2fb8",tools:"10d4397e"}[e]+".js"}function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,o){n=r[e]=[t,o]}));t.push(n[2]=o);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=s(e);var l=new Error;a=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",l.name="ChunkLoadError",l.type=o,l.request=a,n[1](l)}r[e]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(t)},i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},"1bc6":function(e,t,n){"use strict";var o=n("4d2c"),r=n.n(o);r.a},"1cda":function(e,t,n){var o=n("24fb");t=o(!1),t.push([e.i,".whiteboard[data-v-41836d2a]{line-height:normal;font-family:cursive}",""]),e.exports=t},"4d2c":function(e,t,n){var o=n("ed46");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var r=n("499e").default;r("1ff23280",o,!0,{sourceMap:!1,shadowMode:!1})},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"inspire"}},[n("v-navigation-drawer",{attrs:{app:"","expand-on-hover":e.$vuetify.breakpoint.lgAndUp,dark:"",color:"primary darken-3"},scopedSlots:e._u([{key:"append",fn:function(){return[n("v-list",{attrs:{shaped:""}},[n("v-list-item",{attrs:{link:"link",to:"/settings"}},[n("v-list-item-action",[n("v-icon",[e._v("mdi-cogs")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Settings")])],1)],1)],1)]},proxy:!0}]),model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{attrs:{dense:"",flat:""}},[n("v-list-item",{attrs:{link:"",to:"/"}},[n("v-list-item-icon",[n("v-icon",{attrs:{color:"secondary"}},[e._v(" mdi-circle ")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("offPIM")])],1)],1)],1),n("v-divider"),n("NavbarApps"),n("v-divider",{attrs:{inset:""}}),n("v-list-item",{attrs:{link:"",href:"https://lybekk.github.io/offPIM/",target:"_blank",rel:"noreferrer"}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-book-information-variant")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Docs")])],1),n("v-list-item-action",[n("v-icon",[e._v("mdi-open-in-new")])],1)],1)],1),n("v-app-bar",{attrs:{app:"",color:"primary darken-2",dark:"","hide-on-scroll":"","elevate-on-scroll":""},scopedSlots:e._u([{key:"extension",fn:function(){return[n("v-tabs",{attrs:{"align-with-title":"","show-arrows":"","active-class":"primary darken-1 text--white"}},e._l(e.$store.getters.appBarTabs,(function(t,o){return n("v-tab",{key:o,attrs:{to:{name:t.to,params:t.params}}},[e._v(" "+e._s(t.name)+" ")])})),1),n("v-fab-transition",[n("v-btn",{directives:[{name:"show",rawName:"v-show",value:!e.$store.getters.buttonFormNewHidden,expression:"!$store.getters.buttonFormNewHidden"}],attrs:{color:"secondary",fab:"",bottom:"",right:"",absolute:""},on:{click:e.openNewEntryForm}},[n("v-icon",[e._v("mdi-plus")])],1)],1)]},proxy:!0}])},[n("v-progress-linear",{attrs:{active:e.loading,indeterminate:e.loading,absolute:"",top:"",color:"info",height:"4"}}),n("v-app-bar-nav-icon",{attrs:{"aria-label":"Apps menu"},on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),n("v-spacer"),n("LocalWhiteboard"),n("NavbarActions")],1),n("v-scroll-y-transition",{attrs:{mode:"out-in"}},[n("router-view")],1),n("v-snackbar",{attrs:{timeout:e.snackbar.timeout,"multi-line":!0===e.snackbar.multiline,color:e.snackbar.color,app:"",top:e.$vuetify.breakpoint.mdAndDown},model:{value:e.snackbar.visible,callback:function(t){e.$set(e.snackbar,"visible",t)},expression:"snackbar.visible"}},[e._v(" "+e._s(e.snackbar.text)+" ")]),n("DatabaseConnectionDialog"),n("RawDocumentViewer")],1)},a=[],s=(n("b0c0"),n("96cf"),n("1da1")),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list",{attrs:{shaped:""}},[e._l(e.apps,(function(t){return n("v-list-item",{key:t.name,attrs:{link:"",to:{name:t.to,params:t.params},"active-class":"secondary"}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:e._s(t.icon)}})],1),n("v-list-item-content",[n("v-list-item-title",{staticStyle:{"text-transform":"capitalize"},domProps:{textContent:e._s(t.name)}})],1),n("v-list-item-action",["Tasks"==t.name?n("v-badge",{attrs:{content:e.$store.getters.getTasksAggregate.today,value:0!=e.$store.getters.getTasksAggregate.today,bordered:"",overlap:""}}):e._e(),"Messages"==t.name?n("v-badge",{attrs:{content:e.badgeMessagesUnread,value:0!=e.badgeMessagesUnread,bordered:"bordered"}}):e._e()],1)],1)})),n("v-divider",{attrs:{inset:""}}),n("v-list",[n("v-list-item",{attrs:{link:"",to:"/tools"}},[n("v-list-item-action",[n("v-icon",[e._v("mdi-tools")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Tools")])],1)],1)],1),n("v-divider",{attrs:{inset:""}}),n("v-list",[n("v-list-group",{attrs:{"prepend-icon":"mdi-progress-wrench","no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[n("v-list-item-content",[n("v-list-item-title",[e._v("Concepts")])],1)]},proxy:!0}])},e._l(e.concepts,(function(t){return n("v-list-item",{key:t.name,attrs:{link:"",to:{name:t.name}}},[n("v-list-item-action",[n("v-icon",{domProps:{textContent:e._s(t.icon)}})],1),n("v-list-item-content",[n("v-list-item-title",{staticStyle:{"text-transform":"capitalize"},domProps:{textContent:e._s(t.name)}})],1)],1)})),1)],1)],2)},c=[],l={name:"NavbarApps",data:function(){return{apps:[{name:"Dashboard",icon:"mdi-home",to:"dashboard"},{name:"Tasks",icon:"mdi-check",to:"tasksOverview"},{name:"Notes",icon:"mdi-note",to:"notes"},{name:"Logbook",icon:"mdi-book-open",to:"logbook"},{name:"Messages",icon:"mdi-email",to:"messages"},{name:"Search",icon:"mdi-magnify",to:"search"},{name:"Contacts",icon:"mdi-account",to:"contacts"}],concepts:[{name:"finances",icon:"mdi-cash"},{name:"inventory",icon:"mdi-package-variant"},{name:"maps",icon:"mdi-map"},{name:"themes",icon:"mdi-palette"}]}},computed:{badgeMessagesUnread:function(){console.log("Fix this");var e=this.$store.getters.getMessagesUnreadCount;return e>10?"10+":e}}},u=l,d=n("2877"),m=n("6544"),f=n.n(m),p=n("4ca6"),g=n("ce7e"),v=n("132d"),h=n("8860"),b=n("56b0"),k=n("da13"),w=n("1800"),y=n("5d23"),x=n("34c3"),D=Object(d["a"])(u,i,c,!1,null,null,null),S=D.exports;f()(D,{VBadge:p["a"],VDivider:g["a"],VIcon:v["a"],VList:h["a"],VListGroup:b["a"],VListItem:k["a"],VListItemAction:w["a"],VListItemContent:y["b"],VListItemIcon:x["a"],VListItemTitle:y["d"]});var _=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{attrs:{"close-on-content-click":!1,transition:"slide-y-transition",bottom:"",left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[n("v-btn",e._g({attrs:{icon:"","aria-label":"Sync dialog"},on:{click:e.updateLastSync}},o),[n("v-icon",[e._v("mdi-dots-vertical")])],1),e.$store.getters.localSettings.liveSync?n("v-btn",{attrs:{icon:"",loading:e.syncInProgress},on:{click:e.buttonLiveSync}},[e.remoteDBIsOnline?n("v-icon",[e._v("mdi-cloud-sync")]):n("v-icon",[e._v("mdi-cloud-off-outline")])],1):n("v-btn",{attrs:{icon:"",loading:e.syncInProgress,disabled:e.$store.getters.localSettings.liveSync,"aria-label":"Sync button"},on:{click:e.syncDatabase}},[e.remoteDBIsOnline?n("v-icon",[e._v("mdi-cloud-check")]):n("v-icon",[e._v("mdi-cloud-off-outline")])],1)]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[n("v-card",[n("v-list",[n("v-list-item",[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:e._s(e.syncIcon)}})],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Remote Sync")]),e.syncInProgress?n("v-list-item-subtitle",[0!=e.pending.push||0!=e.pending.pull?n("div",[n("span",[e._v("Remaining: ")]),n("span",{staticClass:"warning--text"},[e._v("Push "+e._s(e.pending.push))]),n("span",[e._v(" | ")]),n("span",{staticClass:"info--text"},[e._v("Pull "+e._s(e.pending.pull))])]):n("div",[e._v("...")])]):n("v-list-item-subtitle",{domProps:{textContent:e._s(e.lastSync)}})],1)],1)],1),n("v-divider"),n("v-list",{attrs:{"two-line":""}},[n("v-list-item",{attrs:{color:"primary"},on:{click:function(t){return e.$store.commit("setGenericStateBooleanTrue","dbConnectionDialog")}}},[n("v-list-item-avatar",[n("v-icon",[e._v("mdi-cloud")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Remote DB")]),n("v-list-item-subtitle",{domProps:{textContent:e._s(this.$store.getters.remoteDBSettings.name)}})],1),n("v-list-item-action",[n("v-icon",{attrs:{color:"primary"}},[e._v("mdi-cogs")])],1)],1),n("v-list-item",{attrs:{to:{name:"settings"}}},[n("v-list-item-avatar",[n("v-icon",{attrs:{color:"primary"}},[e._v("mdi-database")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Local DB")])],1),n("v-list-item-action",[n("v-icon",{attrs:{color:"primary"}},[e._v("mdi-cogs")])],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[e.remoteDBIsOnline?n("v-btn",e._g({attrs:{color:"primary",block:"",disabled:e.$store.getters.localSettings.liveSync,loading:e.syncInProgress},on:{click:e.syncDatabase}},o),[e.$store.getters.localSettings.liveSync?n("span",[e._v("Live-sync On")]):n("span",[e._v("Sync")])]):n("v-btn",{attrs:{color:"warning",block:""},on:{click:e.connectRemote}},[e._v("Connect")])]}}])},[n("span",[e._v("Avoid closing browser window during syncing")])])],1)],1)],1)},I=[],B=(n("99af"),n("4de4"),n("caad"),n("d81d"),n("b680"),n("2532"),n("bf19"),n("6c29")),O=n("d6e1"),T={name:"NavbarActions",components:{},mixins:[B["a"]],data:function(){return{banner:!0,menu:!1,lastSync:"Never",pending:{pull:0,push:0},syncInProgress:!1,archivedDocumentsSkippedDuringSync:0}},computed:{syncIcon:function(){var e=this.$store.getters.remoteDBIsOnline;return e?this.syncInProgress?"mdi-lan-connect":"mdi-lan-pending":"mdi-lan-disconnect"},remoteDBIsOnline:function(){return this.$store.getters.remoteDBIsOnline}},mounted:function(){var e=this;this.updateLastSync(),setTimeout((function(){e.$store.getters.localSettings.liveSync&&e.syncDatabase()}),5e3)},methods:{connectRemote:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("remoteDBConnectivityCheck");case 2:t=e.sent,t||this.$store.commit("setGenericStateBooleanTrue","dbConnectionDialog");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateLastSync:function(){var e,t,n=localStorage.getItem("lastSync");if(n){var o=new Date(n),r=new Date,a=r-o;a<36e5?(e=Math.floor(a/6e4),t=1===e?"minute":"minutes"):(e=Math.floor(a/36e5),t="hours"),this.lastSync="".concat(e," ").concat(t," since last sync")}else this.lastSync="Never synced"},syncDatabase:function(){this.remoteDBIsOnline||this.$store.dispatch("remoteDBConnectivityCheck");var e=localStorage.getItem("remoteDBOptions");if(!e&&!this.remoteDBIsOnline)return this.$store.dispatch("infoBridge",{text:"Enter connection info",color:"info"}),void this.$store.commit("setGenericStateBooleanTrue","dbConnectionDialog");var t=this.$store,n=this;this.syncInProgress=!0,this.pending.push=0,this.pending.pull=0,this.archivedDocumentsSkippedDuringSync=0;var o=this.$store.getters.localSettings,r=[];O["a"].sync(window.db,window.remoteDB,{live:o.liveSync,retry:o.retrySync,push:{},pull:{filter:function(e){if(!e.archived)return!0;r.push(e._id)}}}).on("change",(function(e){console.log("Change happenend: ",e),n.pending[e.direction]=e.change.pending})).on("paused",(function(e){e?console.log("Pause happened. Sync error: ",e):(console.log("Pause happened. Sync success"),n.syncInProgress=!1),n.$store.getters.localSettings.liveSync&&(r.length&&n.syncPhase2(r),localStorage.setItem("lastSync",(new Date).toJSON()),n.updateLastSync())})).on("active",(function(){this.syncInProgress=!0,console.log("replicate resumed (e.g. new changes replicating, user went back online)")})).on("denied",(function(e){console.log("DENIED HAPPENED: ",e)})).on("complete",(function(e){r.length&&n.syncPhase2(r),t.dispatch("infoBridge",{text:"Done syncing:"+e});var o,a=e.push.docs_written,s=new Date(e.push.start_time),i=new Date(e.push.end_time),c=Math.abs((s-i)/1e3).toFixed(2),l=e.pull.docs_written,u=new Date(e.pull.start_time),d=new Date(e.pull.end_time),m=Math.abs((u-d)/1e3).toFixed(2);o=0===a&&0===l?"No changes made. Local&Remote DB in sync":"Sent ".concat(a," documents to remote database in ").concat(c,"s\n              , and received ").concat(l," in ").concat(m,"s"),t.dispatch("infoBridge",{text:o,color:"success",timeout:6e3}),setTimeout((function(){localStorage.getItem("lastSync")||t.dispatch("infoBridge",{text:"After the very first sync, loading data for the first time may be slow, due to indexing.",color:"info",timeout:8e3})}),6500),localStorage.setItem("lastSync",(new Date).toJSON()),n.updateLastSync(),n.syncInProgress=!1})).on("error",(function(e){n.syncInProgress=!1,t.dispatch("infoBridge",{text:"Something went wrong during sync. Is the Remote DB reachable? ",color:"error",error:e})}))},syncPhase2:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.db.allDocs().then((function(e){return e.rows.map((function(e){return e.id}))}));case 3:if(n=e.sent,o=t.filter((function(e){return n.includes(e)})),!o.length){e.next=10;break}return e.next=8,window.db.replicate.from(window.remoteDB,{doc_ids:o});case 8:r=e.sent,console.log("Result from Sync Phase 2: ",r);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log("Sync phase 2 failed: ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));function t(t){return e.apply(this,arguments)}return t}(),buttonLiveSync:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.remoteDBIsOnline){e.next=3;break}return e.next=3,this.$store.dispatch("remoteDBConnectivityCheck");case 3:t=this.remoteDBIsOnline?"Live-sync is working":"No contact with remote database",this.$store.dispatch("infoBridge",{text:t,color:this.remoteDBIsOnline?"success":"warning"});case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},V=T,C=n("8336"),R=n("b0af"),j=n("99d9"),P=n("8270"),L=n("e449"),$=n("2fa4"),N=n("3a2f"),A=Object(d["a"])(V,_,I,!1,null,null,null),M=A.exports;f()(A,{VBtn:C["a"],VCard:R["a"],VCardActions:j["a"],VDivider:g["a"],VIcon:v["a"],VList:h["a"],VListItem:k["a"],VListItemAction:w["a"],VListItemAvatar:P["a"],VListItemContent:y["b"],VListItemIcon:x["a"],VListItemSubtitle:y["c"],VListItemTitle:y["d"],VMenu:L["a"],VSpacer:$["a"],VTooltip:N["a"]});var F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":"50vw","overlay-opacity":"0.9","overlay-color":"secondary",scrollable:"",fullscreen:e.$vuetify.breakpoint.mdAndDown,transition:"dialog-bottom-transition"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[e._v("Remote database")]),n("v-card-subtitle",[e._v("Authentication")]),n("v-card-text",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{staticClass:"text-capitalize",attrs:{color:e.getColor,label:"Remote database URL","hide-details":"",outlined:"",shaped:""},model:{value:e.remoteDBUrl,callback:function(t){e.remoteDBUrl=t},expression:"remoteDBUrl"}})],1),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-text-field",{attrs:{label:"Username","hide-details":"",outlined:"",shaped:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-text-field",{attrs:{"append-icon":e.show1?"mdi-eye":"mdi-eye-off",type:e.show1?"text":"password",name:"pwd",label:"Password","hide-details":"",outlined:"",shaped:""},on:{"click:append":function(t){e.show1=!e.show1}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-checkbox",{attrs:{label:"Save settings in browser"},model:{value:e.saveConnectionDetails,callback:function(t){e.saveConnectionDetails=t},expression:"saveConnectionDetails"}})],1)],1),e.connectionResultMessage?n("v-row",[n("p",{class:e.getColor+"--text"},[e._v(e._s(e.connectionResultMessage))])]):e._e()],1),n("v-card-actions",[n("v-btn",{attrs:{text:"",color:"primary",to:{name:"settings"}},on:{click:function(t){e.dialog=!1}}},[n("v-icon",[e._v("mdi-cogs")]),n("span",[e._v("Settings")])],1),n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")]),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.setValues}},[e._v("Connect")])],1)],1)],1)},E=[],U=n("5530");O["a"].plugin(n("5d16"));var J={name:"DatabaseConnectionDialog",data:function(){return{remoteDBUrl:null,username:null,password:null,show1:!1,connectionResultMessage:null,saveConnectionDetails:!1}},computed:{dialog:{get:function(){return this.$store.getters.dbConnectionDialog},set:function(e){e||this.$store.commit("setGenericStateBooleanFalse","dbConnectionDialog")}},getColor:function(){var e=this.$store.getters.remoteDBIsOnline;return 0==e?"error":1==e?"success":""}},mounted:function(){this.startup()},methods:{setValues:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,o,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$store,n=this.remoteDBUrl,n&&""!==n){e.next=5;break}return t.dispatch("infoBridge",{color:"info",text:"Remote DB URL not set"}),e.abrupt("return");case 5:return o={name:n},r=this.username,r&&r.length>1&&(o.auth={username:r,password:this.password}),e.next=10,new O["a"](o);case 10:return window.remoteDB=e.sent,e.prev=11,e.next=14,window.remoteDB.info();case 14:if(a=e.sent,!a.db_name){e.next=22;break}t.dispatch("infoBridge",{text:"Remote DB connected.",color:"success"}),this.saveConnectionDetails&&localStorage.setItem("remoteDBOptions",JSON.stringify(Object(U["a"])({name:n},o.auth))),t.commit("setGenericStateBooleanTrue","remoteDBIsOnline"),this.dialog=!1,e.next=23;break;case 22:throw{message:"Something went wrong. See console for details"};case 23:this.connectionResultMessage="Connected",e.next=30;break;case 26:e.prev=26,e.t0=e["catch"](11),console.log("Connection failed: ",e.t0),401===e.t0.status?this.connectionResultMessage=e.t0.message:(this.connectionResultMessage=JSON.stringify(e.t0),t.dispatch("infoBridge",{text:"Remote DB Unreachable",color:"warning"}));case 30:case"end":return e.stop()}}),e,this,[[11,26]])})));function t(){return e.apply(this,arguments)}return t}(),startup:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=localStorage.getItem("remoteDBOptions"),t&&(n=JSON.parse(t),this.remoteDBUrl=n.name,this.username=n.username?n.username:null,this.password=n.password?n.password:null,this.setValues());case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},G=J,q=n("ac7c"),H=n("62ad"),z=n("169a"),K=n("0fd9"),W=n("8654"),Y=Object(d["a"])(G,F,E,!1,null,null,null),Z=Y.exports;f()(Y,{VBtn:C["a"],VCard:R["a"],VCardActions:j["a"],VCardSubtitle:j["b"],VCardText:j["c"],VCardTitle:j["d"],VCheckbox:q["a"],VCol:H["a"],VDialog:z["a"],VIcon:v["a"],VRow:K["a"],VSpacer:$["a"],VTextField:W["a"]});var Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{fullscreen:e.$vuetify.breakpoint.mdAndDown,width:"50vw"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-toolbar",{attrs:{color:"cyan",dark:"",flat:""},scopedSlots:e._u([{key:"extension",fn:function(){return[n("v-tabs",{attrs:{color:"primary",grow:e.$vuetify.breakpoint.smAndDown,"align-with-title":e.$vuetify.breakpoint.mdAndUp},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("v-tabs-slider",{attrs:{color:"yellow"}}),e._l(e.tabs,(function(t){return n("v-tab",{key:t},[e._v(" "+e._s(t)+" ")])}))],2)]},proxy:!0}])},[n("v-toolbar-title",[e._v("Raw JSON document")]),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:function(t){e.dialog=!1}}},[n("v-icon",[e._v("mdi-close")])],1)],1),n("v-tabs-items",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(t){return n("v-tab-item",{key:t},["Raw"==t?n("v-card",{staticClass:"grey darken-4 info--text pa-2",attrs:{flat:""}},[n("v-card-text",[n("pre",[n("code",{staticClass:"grey darken-4 info--text pa-2",staticStyle:{width:"100%"},domProps:{textContent:e._s(JSON.stringify(e.doc,null,2))}})])])],1):e._e(),"Iterated"==t?n("v-card",{attrs:{flat:""}},[n("v-card-text",[n("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[e._v(" Key ")]),n("th",{staticClass:"text-left"},[e._v(" Value ")])])]),n("tbody",e._l(e.doc,(function(t,o){return n("tr",{key:o},[n("td",{domProps:{textContent:e._s(o)}}),n("td",[e._v(e._s(t))])])})),0)]},proxy:!0}],null,!0)})],1)],1):e._e(),"Editor"==t?n("v-card",{attrs:{flat:""}},[n("v-card-title",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",disabled:!e.validateJSON},on:{click:e.saveDoc}},[e._v(" "+e._s(e.validateJSON?"Save":"Invalid JSON")+" ")])],1),n("v-card-text",[n("v-textarea",{staticClass:"jsonValid",class:e.validateJSON?"jsonValid":"jsonInvalid",attrs:{filled:"","auto-grow":"",label:"Edit",spellcheck:"false",required:""},model:{value:e.jsonInput,callback:function(t){e.jsonInput=t},expression:"jsonInput"}})],1)],1):e._e()],1)})),1)],1)],1)},X=[],ee={name:"Rawdocumentviewer",mixins:[B["a"]],data:function(){return{tab:"Raw",tabs:["Raw","Iterated","Editor"],jsonInputData:!0}},computed:{doc:function(){return this.$store.getters.rawDocumentViewerDocument},dialog:{get:function(){return this.$store.getters.rawDocumentViewerDialog},set:function(e){this.$store.commit("setGenericStateString",{property:"rawDocumentViewerDialog",value:e})}},jsonInput:{get:function(){return JSON.stringify(this.doc,null,2)},set:function(e){this.jsonInputData=e}},validateJSON:function(){try{JSON.parse(this.jsonInputData)}catch(e){return!1}return!0}},methods:{saveDoc:function(){this.validateJSON&&this.putDoc(JSON.parse(this.jsonInputData))}}},te=ee,ne=(n("1bc6"),n("1f4f")),oe=n("71a3"),re=n("c671"),ae=n("fe57"),se=n("aac8"),ie=n("9a96"),ce=n("a844"),le=n("71d9"),ue=n("2a7f"),de=Object(d["a"])(te,Q,X,!1,null,"755b58de",null),me=de.exports;f()(de,{VBtn:C["a"],VCard:R["a"],VCardText:j["c"],VCardTitle:j["d"],VDialog:z["a"],VIcon:v["a"],VSimpleTable:ne["a"],VSpacer:$["a"],VTab:oe["a"],VTabItem:re["a"],VTabs:ae["a"],VTabsItems:se["a"],VTabsSlider:ie["a"],VTextarea:ce["a"],VToolbar:le["a"],VToolbarTitle:ue["b"]});var fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{width:"45vw",fullscreen:e.isSmallScreen,scrollable:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",r,!1),o),[n("v-icon",[e._v("mdi-clipboard")])],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-banner",{model:{value:e.banner,callback:function(t){e.banner=t},expression:"banner"}},[e._v(" Whiteboard will not be synced, but stored locally in the browser, and retained across sessions. ")]),n("v-card-text",[n("v-textarea",{staticClass:"whiteboard",attrs:{"auto-grow":"",spellcheck:"false","hide-details":"",autofocus:""},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),n("v-card-actions",[n("v-btn",{attrs:{icon:"",color:"secondary"},on:{click:function(t){e.banner=!e.banner}}},[n("v-icon",[e._v("mdi-information")])],1),n("v-spacer"),n("v-btn",{attrs:{text:"",color:"secondary"},on:{click:function(t){e.dialog=!e.dialog}}},[e._v(" Close ")])],1)],1)],1)},pe=[],ge=n("e022"),ve={name:"LocalWhiteboard",mixins:[ge["a"]],data:function(){return{dialog:!1,banner:!1}},computed:{content:{get:function(){var e=window.localStorage.getItem("offpimLocalWhiteboard");return e||""},set:function(e){window.localStorage.setItem("offpimLocalWhiteboard",e)}}}},he=ve,be=(n("cf6b"),n("e4e5")),ke=Object(d["a"])(he,fe,pe,!1,null,"41836d2a",null),we=ke.exports;f()(ke,{VBanner:be["a"],VBtn:C["a"],VCard:R["a"],VCardActions:j["a"],VCardText:j["c"],VDialog:z["a"],VIcon:v["a"],VSpacer:$["a"],VTextarea:ce["a"]});var ye=n("a694"),xe=n("eb11"),De={name:"App",components:{NavbarApps:S,NavbarActions:M,DatabaseConnectionDialog:Z,RawDocumentViewer:me,LocalWhiteboard:we},computed:{drawer:{get:function(){return this.$store.getters.isLeftDrawerOpen},set:function(e){this.$store.commit("setLeftDrawer",e)}},snackbar:function(){return this.$store.state.snackbar},loading:function(){return this.$store.getters.loaderState}},mounted:function(){var e=this;this.$store.dispatch("infoBridge",{text:"offPIM mounted",level:"debug"}),this.$store.commit("loadLocalSettings"),this.$vuetify.theme.dark=localStorage.getItem("darkMode"),setTimeout((function(){e.$store.commit("setGenericStateBooleanFalse","buttonFormNewHidden"),e.startupcheck()}),1e3),setTimeout((function(){e.$vuetify.breakpoint.lgAndUp&&(e.drawer=!0)}),2e3);var t=this;window.addEventListener("keydown",(function(e){(e.metaKey||e.ctrlKey)&&"d"===e.key&&(e.preventDefault(),t.openNewEntryForm())}))},methods:{startupcheck:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$store,t.dispatch("checkThemeSettings"),t.dispatch("localDBInfo"),e.prev=3,e.next=6,t.dispatch("startupIndexCheck",{doc:"offpim",version:ye.version});case 6:return n=e.sent,e.next=9,t.dispatch("startupIndexCheck",{doc:"offpim_mango_indexes",version:xe.version});case 9:if(o=e.sent,n&&o){e.next=15;break}return e.next=13,this.insertDesignDocument(ye,"offpim");case 13:return e.next=15,this.insertDesignDocument(xe,"offpim_mango_indexes");case 15:t.dispatch("setTotals"),t.dispatch("setMessagesUnreadCount"),e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](3),this.$store.dispatch("infoBridge",{text:"Something went wrong during design doc verification: ",color:"error",error:e.t0});case 22:case"end":return e.stop()}}),e,this,[[3,19]])})));function t(){return e.apply(this,arguments)}return t}(),insertDesignDocument:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){var o,r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Checking design document version for doc: ",n),o=t,e.prev=2,e.next=5,window.db.get("_design/".concat(n));case 5:if(r=e.sent,!(o.version>r.version)){e.next=18;break}return o._rev=r._rev,e.next=10,window.db.put(o);case 10:if(a=e.sent,!a.ok){e.next=15;break}this["design_".concat(n)]=!0,e.next=16;break;case 15:throw"Failed inserting design document "+n;case 16:e.next=19;break;case 18:o.version==r.version&&(this["design_".concat(n)]=!0);case 19:e.next=29;break;case 21:return e.prev=21,e.t0=e["catch"](2),console.log(n," doc does not exist. Attempting insert"),e.next=26,window.db.put(o);case 26:s=e.sent,this["design_".concat(n)]=!0,console.log("Insert result: ",s);case 29:case"end":return e.stop()}}),e,this,[[2,21]])})));function t(t,n){return e.apply(this,arguments)}return t}(),openNewEntryForm:function(){var e={name:this.$route.name,params:this.$route.params};window.localStorage.setItem("currentRoute",JSON.stringify(e)),this.$router.push({name:"formsNew"})}}},Se=De,_e=n("7496"),Ie=n("40dc"),Be=n("5bc1"),Oe=n("0789"),Te=n("f774"),Ve=n("8e36"),Ce=n("2db4"),Re=Object(d["a"])(Se,r,a,!1,null,null,null),je=Re.exports;f()(Re,{VApp:_e["a"],VAppBar:Ie["a"],VAppBarNavIcon:Be["a"],VBtn:C["a"],VDivider:g["a"],VFabTransition:Oe["c"],VIcon:v["a"],VList:h["a"],VListItem:k["a"],VListItemAction:w["a"],VListItemContent:y["b"],VListItemIcon:x["a"],VListItemTitle:y["d"],VNavigationDrawer:Te["a"],VProgressLinear:Ve["a"],VScrollYTransition:Oe["g"],VSnackbar:Ce["a"],VSpacer:$["a"],VTab:oe["a"],VTabs:ae["a"]});n("d3b7");var Pe=n("8c4f"),Le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-main",[n("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[n("v-carousel",{attrs:{height:"25vh","hide-delimiters":"","show-arrows":!1},model:{value:e.carousel,callback:function(t){e.carousel=t},expression:"carousel"}},e._l(e.slides,(function(t,o){return n("v-carousel-item",{key:o,attrs:{transition:"scroll-x-transition"}},[n("v-sheet",{attrs:{height:"100%",color:"transparent text--disabled"}},[n("v-row",{staticClass:"fill-height",attrs:{align:"center",justify:"center"}},[n("div",{staticClass:"text-h3 font-weight-black",domProps:{textContent:e._s(t)}})])],1)],1)})),1),n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[n("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[n("v-col",{attrs:{cols:"6"}},[n("v-sheet",[n("v-navigation-drawer",{attrs:{floating:"",permanent:""}},[n("v-list",{attrs:{shaped:""}},e._l(e.links,(function(t){return n("v-list-item",{key:t.title,attrs:{link:""},on:{click:function(n){return e.$router.push(t.link)}}},[n("v-list-item-icon",[n("v-icon",{attrs:{color:"secondary"}},[e._v(" "+e._s(t.icon)+" ")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.text))])],1)],1)})),1)],1)],1)],1)],1)],1)],1)],1)],1)},$e=[],Ne=(n("a434"),{name:"Welcome",data:function(){return{carousel:0,links:[{text:"Tasks",icon:"mdi-check",link:"/tasks"},{text:"Notes",icon:"mdi-note",link:"/notes"},{text:"Dashboard",icon:"mdi-view-dashboard",link:"/dashboard"},{text:"Logbook",icon:"mdi-book-open",link:"/logbook"}],slides:["offPIM",(new Date).toDateString(),(new Date).toLocaleTimeString()]}},computed:{},created:function(){},mounted:function(){var e=this;setTimeout((function(){e.carousel=1}),800),setTimeout((function(){e.carousel=2}),2e3),this.updateClock()},methods:{updateClock:function(){var e=this;setInterval((function(){var t=(new Date).toLocaleTimeString();e.slides.splice(2,1,t)}),1e3)}}}),Ae=Ne,Me=n("5e66"),Fe=n("3e35"),Ee=n("a523"),Ue=n("f6c4"),Je=n("8dd9"),Ge=Object(d["a"])(Ae,Le,$e,!1,null,null,null),qe=Ge.exports;f()(Ge,{VCarousel:Me["a"],VCarouselItem:Fe["a"],VCol:H["a"],VContainer:Ee["a"],VIcon:v["a"],VList:h["a"],VListItem:k["a"],VListItemContent:y["b"],VListItemIcon:x["a"],VListItemTitle:y["d"],VMain:Ue["a"],VNavigationDrawer:Te["a"],VRow:K["a"],VSheet:Je["a"]}),o["a"].use(Pe["a"]);var He=[{path:"/",name:"welcome",component:qe},{path:"/new",name:"formsNew",redirect:{name:"formsNewTask"},component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~forms~logbook~tasks"),n.e("forms~logbook"),n.e("forms")]).then(n.bind(null,"0894"))},children:[{path:"task",name:"formsNewTask",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~forms~logbook~tasks"),n.e("forms~logbook"),n.e("forms")]).then(n.bind(null,"260d"))}},{path:"note",name:"formsNewNote",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~forms~logbook~tasks"),n.e("forms~logbook"),n.e("forms")]).then(n.bind(null,"b8e2"))}},{path:"log",name:"formsNewLog",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~forms~logbook~tasks"),n.e("forms~logbook"),n.e("forms")]).then(n.bind(null,"13a7"))}},{path:"message",name:"formsNewMessage",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~forms~logbook~tasks"),n.e("forms~logbook"),n.e("forms")]).then(n.bind(null,"683d"))}},{path:"contact",name:"formsNewContact",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~forms~logbook~tasks"),n.e("forms~logbook"),n.e("forms")]).then(n.bind(null,"8039"))}},{path:"finance",name:"formsNewFinance",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~forms~logbook~tasks"),n.e("forms~logbook"),n.e("forms")]).then(n.bind(null,"f800"))}}]},{path:"/contacts/:list?",name:"contacts",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~finances~inventory~messages~notes~tasks"),n.e("contacts~forms~logbook~tasks"),n.e("contacts")]).then(n.bind(null,"c93c"))}},{path:"/dashboard",name:"dashboard",component:function(){return n.e("dashboard").then(n.bind(null,"7277"))}},{path:"/tasks",name:"tasks",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~finances~inventory~messages~notes~tasks"),n.e("contacts~forms~logbook~tasks"),n.e("finances~inventory~tasks"),n.e("tasks")]).then(n.bind(null,"eb1f"))},redirect:"tasks/overview",children:[{path:"overview",name:"tasksOverview",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~finances~inventory~messages~notes~tasks"),n.e("contacts~forms~logbook~tasks"),n.e("finances~inventory~tasks"),n.e("tasks")]).then(n.bind(null,"4b30"))}},{path:"list/:list",name:"tasksList",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~finances~inventory~messages~notes~tasks"),n.e("contacts~forms~logbook~tasks"),n.e("finances~inventory~tasks"),n.e("tasks")]).then(n.bind(null,"ad8c"))}},{path:"project/:projectid",name:"tasksProject",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~finances~inventory~messages~notes~tasks"),n.e("contacts~forms~logbook~tasks"),n.e("finances~inventory~tasks"),n.e("tasks")]).then(n.bind(null,"a91a"))},props:!0},{path:"completed_projectless",name:"completedProjectless",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~finances~inventory~messages~notes~tasks"),n.e("contacts~forms~logbook~tasks"),n.e("finances~inventory~tasks"),n.e("tasks")]).then(n.bind(null,"b5a7"))}},{path:"ranking",name:"taskRanking",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~finances~inventory~messages~notes~tasks"),n.e("contacts~forms~logbook~tasks"),n.e("finances~inventory~tasks"),n.e("tasks")]).then(n.bind(null,"5cf0"))}}]},{path:"/notes",name:"notes",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~finances~inventory~messages~notes~tasks"),n.e("notes")]).then(n.bind(null,"0841"))},redirect:"notes/tag/No tag",children:[{path:"tag/:tag",name:"notesTag",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~finances~inventory~messages~notes~tasks"),n.e("notes")]).then(n.bind(null,"3008"))},props:!0}]},{path:"/logbook/:list?",name:"logbook",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~forms~logbook~tasks"),n.e("forms~logbook"),n.e("logbook")]).then(n.bind(null,"988f"))},props:!0},{path:"/maps",name:"maps",component:function(){return n.e("maps").then(n.bind(null,"daba"))}},{path:"/messages/:tag?",name:"messages",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~finances~inventory~messages~notes~tasks"),n.e("messages")]).then(n.bind(null,"eaad"))}},{path:"/setup",name:"setup",component:function(){return n.e("setup").then(n.bind(null,"da7d"))}},{path:"/settings",name:"settings",component:function(){return n.e("settings").then(n.bind(null,"26d3"))}},{path:"/inventory",name:"inventory",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~finances~inventory~messages~notes~tasks"),n.e("finances~inventory~tasks"),n.e("inventory")]).then(n.bind(null,"e25f"))}},{path:"/search",name:"search",component:function(){return n.e("search").then(n.bind(null,"2d3b"))}},{path:"/themes",name:"themes",component:function(){return n.e("themes").then(n.bind(null,"b729"))}},{path:"/tools",name:"tools",component:function(){return n.e("tools").then(n.bind(null,"d5d4"))}},{path:"/finances",redirect:{name:"financesOverview"},name:"finances",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~finances~inventory~messages~notes~tasks"),n.e("finances~inventory~tasks"),n.e("finances")]).then(n.bind(null,"e639"))},children:[{path:"overview",name:"financesOverview",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~finances~inventory~messages~notes~tasks"),n.e("finances~inventory~tasks"),n.e("finances")]).then(n.bind(null,"ef65"))}},{path:"budget",name:"budget",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~finances~inventory~messages~notes~tasks"),n.e("finances~inventory~tasks"),n.e("finances")]).then(n.bind(null,"5e2a"))}},{path:"transactions",name:"transactions",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~finances~inventory~messages~notes~tasks"),n.e("finances~inventory~tasks"),n.e("finances")]).then(n.bind(null,"168f"))}},{path:"accounts",name:"accounts",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~finances~inventory~messages~notes~tasks"),n.e("finances~inventory~tasks"),n.e("finances")]).then(n.bind(null,"3eb0"))}},{path:"assets",name:"assets",component:function(){return Promise.all([n.e("contacts~finances~forms~inventory~logbook~messages~notes~tasks"),n.e("contacts~finances~inventory~messages~notes~tasks"),n.e("finances~inventory~tasks"),n.e("finances")]).then(n.bind(null,"e09b"))}}]}],ze=new Pe["a"]({routes:He}),Ke=ze,We=n("2f62"),Ye={setTotals:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.db.query("offpim/totals",{group:!0});case 2:n=e.sent,t.commit("setTotals",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),insertDocument:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){var o,r,a,s,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=n.doc,e.prev=1,r._id){e.next=5;break}throw a="_id missing in request. Insert unsuccessful",a;case 5:if(!r._rev){e.next=10;break}return e.next=8,window.db.get(r._id);case 8:s=e.sent,r._rev=s._rev;case 10:return e.next=12,window.db.put(r);case 12:if(i=e.sent,!i.ok){e.next=18;break}o=n.snackbarText?n.snackbarText:"Document update OK",this.dispatch("infoBridge",{color:"success",text:o}),e.next=20;break;case 18:throw c="Document update failed"+i,c;case 20:return e.next=22,i;case 22:return e.abrupt("return",e.sent);case 25:e.prev=25,e.t0=e["catch"](1),this.dispatch("infoBridge",{color:"error",text:"Document operation failed",level:"error",error:e.t0});case 28:case"end":return e.stop()}}),e,this,[[1,25]])})));function t(t,n){return e.apply(this,arguments)}return t}(),postData:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){var o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.commit("loaderActive"),e.next=3,fetch(n.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.data)});case 3:return o=e.sent,e.next=6,o.json();case 6:return r=e.sent,this.commit("loaderInactive"),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),startupIndexCheck:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){var o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,o=n.version,e.next=4,window.db.get("_design/".concat(n.doc));case 4:if(r=e.sent,!(o>r.version)){e.next=8;break}return console.log("Design document version in app is higher than the one in the database. Attempting design doc insert"),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e["catch"](0),console.log("Design doc "+n.doc+" not in local database: ",e.t0),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));function t(t,n){return e.apply(this,arguments)}return t}(),remoteDBConnectivityCheck:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.remoteDB.info();case 3:if(n=e.sent,!n.db_name){e.next=9;break}return t.commit("setGenericStateBooleanTrue","remoteDBIsOnline"),t.dispatch("infoBridge",{color:"success",text:"Remote database connection successful"}),t.dispatch("remoteDBInfo"),e.abrupt("return",!0);case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e["catch"](0),t.dispatch("infoBridge",{color:"warning",text:"Remote database connection unsuccessful",level:"warn",error:JSON.stringify(e.t0)}),t.commit("setGenericStateBooleanFalse","remoteDBIsOnline"),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));function t(t){return e.apply(this,arguments)}return t}(),remoteDBInfo:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.remoteDB.info();case 2:n=e.sent,t.commit("remoteDBInfo",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),localDBInfo:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.db.info();case 2:n=e.sent,t.commit("localDBInfo",n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),setRawDocumentViewerDocument:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=t,e.next=4,window.db.get(n);case 4:e.t1=e.sent,e.t0.commit.call(e.t0,"setRawDocumentViewerDocument",e.t1),e.next=11;break;case 8:e.prev=8,e.t2=e["catch"](0),t.dispatch("infoBridge",{color:"warning",text:"Could not find document",level:"warn",error:e.t2});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));function t(t,n){return e.apply(this,arguments)}return t}(),getDoc:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.db.get(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),refreshDoc:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.dispatch("getDoc",n);case 2:o=e.sent,t.commit("refreshDoc",o);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),infoBridge:function(e,t){if(t.created=(new Date).toISOString(),t.color&&!t.silent&&e.commit("showSnackbar",t),t.color&&!t.level){var n={primary:"info",info:"info",secondary:"info",success:"success",error:"error",warning:"warn"};t.level=n[t.color]}t.level||(t.level="info"),"error"===t.level&&console.warn("offPIM Info Bridge reports an error: ",JSON.stringify(t)),e.commit("addSessionLog",t)},populateTagsList:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,window.db.query(t,{group:!0});case 3:o=n.sent,e.commit("setTagList",o),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),e.dispatch("infoBridge",{text:n.t0,color:"error"});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()}},Ze=(n("7db0"),n("c740"),{isLeftDrawerOpen:function(e){return e.leftDrawer},isRightDrawerOpen:function(e){return e.rightDrawer},localDBInfo:function(e){return e.localDBInfo},remoteDBInfo:function(e){return e.remoteDBInfo},remoteDBSettings:function(e){return e.remoteDBSettings},remoteDBIsOnline:function(e){return e.remoteDBIsOnline},getDeletedDocuments:function(e){return e.deleted},isDeleted:function(e){return function(t){return e.deleted.includes(t)}},loaderState:function(e){return e.loaderActive},getTotals:function(e){return e.totals},getTagList:function(e){return e.tagList},getData:function(e){return e.data},getDataLength:function(e){return e.data.length},getDataItem:function(e){return function(t){return e.data.find((function(e){return e._id===t}))}},getDataItemIndex:function(e){return function(t){return e.data.findIndex((function(e){var n=e._id;return n===t}))}},dbConnectionDialog:function(e){return e.dbConnectionDialog},dialogItemDetailed:function(e){return e.dialogItemDetailed},localSettings:function(e){return e.localSettings},rawDocumentViewerDialog:function(e){return e.rawDocumentViewerDialog},rawDocumentViewerDocument:function(e){return e.rawDocumentViewerDocument},buttonFormNewHidden:function(e){return e.buttonFormNewHidden},appBarTabs:function(e){return e.appBarTabs},sessionLogs:function(e){return e.sessionLogs},selectedDoc:function(e){return e.selectedDoc}}),Qe=(n("4160"),n("159b"),{setLeftDrawer:function(e,t){e.leftDrawer=t},setRightDrawer:function(e,t){e.rightDrawer=t},setTagList:function(e,t){e.tagList=t.rows},setTotals:function(e,t){var n=e,o=t.rows;o.forEach((function(e){n.totals[e.key]=e.value}))},showSnackbar:function(e,t){e.snackbar.text=t.text,e.snackbar.multiline=t.text.length>50,t.multiline&&(e.snackbar.multiline=t.multiline),t.color?e.snackbar.color=t.color:e.snackbar.color="",t.timeout&&(e.snackbar.timeout=t.timeout),e.snackbar.visible=!0},closeSnackbar:function(e){e.snackbar.visible=!1,e.snackbar.multiline=!1,e.snackbar.timeout=4e3,e.snackbar.text=null},addError:function(e,t){e.errors.push(t)},addDataArray:function(e,t){e.data=t},flushData:function(e){e.data=[]},toggleLoader:function(e){e.loaderActive=!e.loaderActive},loaderInactive:function(e){e.loaderActive=!1},loaderActive:function(e){e.loaderActive=!0},addDeleted:function(e,t){e.deleted.push(t)},setGenericStateString:function(e,t){e[t.property]=t.value},setGenericStateBooleanTrue:function(e,t){e[t]=!0},setGenericStateBooleanFalse:function(e,t){e[t]=!1},setremoteDBUrl:function(e,t){e.remoteDBSettings.name=t},remoteDBInfo:function(e,t){e.remoteDBInfo=t},localDBInfo:function(e,t){e.localDBInfo=t},loadLocalSettings:function(e){var t=window.localStorage.getItem("offpimLocalSettings");if(t){var n=JSON.parse(t);e.localSettings=n}},setLocalSetting:function(e,t){var n=t.key,o=t.value,r=window.localStorage.getItem("offpimLocalSettings");null==r&&window.localStorage.setItem("offpimLocalSettings",JSON.stringify({}));var a=JSON.parse(window.localStorage.getItem("offpimLocalSettings"));a[n]=o,window.localStorage.setItem("offpimLocalSettings",JSON.stringify(a)),e.localSettings[n]=o},setRawDocumentViewerDocument:function(e,t){e.rawDocumentViewerDocument=t,e.rawDocumentViewerDialog=!0},appBarTabs:function(e,t){e.appBarTabs=t},dialogItemDetailedHide:function(e){e.dialogItemDetailed=!1},dialogItemDetailedShow:function(e){e.dialogItemDetailed=!0},refreshDoc:function(e,t){var n=e.data.findIndex((function(e){var n=e._id;return n===t._id}));o["a"].set(e.data,n,t)},addSessionLog:function(e,t){e.sessionLogs.push(t)},setSelectedDoc:function(e,t){e.selectedDoc=t}}),Xe={state:{selectedNote:{},showNoteSheet:!1},mutations:{setSelectedNote:function(e,t){e.selectedNote=t}},getters:{selectedNote:function(e){return e.selectedNote}}},et=Xe,tt=(n("fb6a"),n("668b")),nt={state:{tasksAggregate:{today:0,overdue:0,tomorrow:0,doneToday:0,initiated:!1},statusColors:{cancelled:"error",wait:"secondary",plan:"secondary",todo:"primary",next:"warning",doing:"info",done:"success"},statusIcons:{cancelled:"mdi-close-circle",wait:"mdi-progress-clock",plan:"mdi-progress-wrench",todo:"mdi-circle-double",next:"mdi-arrow-right-circle-outline",doing:"mdi-circle-slice-5",done:"mdi-check-circle"},taskStatuses:{plan:0,wait:0,next:0,todo:0,cancelled:0,done:0,doing:0},taskPriorities:{1:0,2:0,3:0,4:0},postponed:[],openProjects:[]},mutations:{setTaskField:function(e,t){var n=e.data.findIndex((function(e){var n=e._id;return n===t._id})),o=e.data[n];o[t.field]=t.value,this.dispatch("insertDocument",{doc:o})},setTaskStatuses:function(e,t){e.taskStatuses[t.key]=t.value},setTaskPriorities:function(e,t){e.taskPriorities[t.key]=t.value},addPostponed:function(e,t){e.postponed.push(t)},setTasksAggregate:function(e,t){e.tasksAggregate[t.key]=t.value},flushOpenProjects:function(e){e.openProjects=[]},addOpenProjects:function(e,t){e.openProjects=t}},actions:{tasksDueAggregation:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n,o,r,a,s,i,c,l,u,d,m,f,p,g,v,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={today:0,tomorrow:0,overdue:0},o=new Date,r=o.toISOString().slice(0,10),a=(new Date).setDate(o.getDate()+1),s=new Date(a),i=s.toISOString().slice(0,10),c=(new Date).setDate(o.getDate()+2),l=new Date(c),u=l.toISOString().slice(0,10),d=(new Date).setDate(o.getDate()-1),m=new Date(d),f=m.toISOString().slice(0,10),e.prev=12,p={limit:400,group:!0,include_docs:!1},e.next=16,window.db.query("offpim/tasks-due",p);case 16:g=e.sent,g.rows.forEach((function(e){e.key>r&&e.key<u&&(n.tomorrow+=e.value),e.key.slice(0,10)==r&&(n.today+=e.value),e.key<r&&(n.overdue+=e.value)})),t.commit("setTasksAggregate",{key:"today",value:n.today}),t.commit("setTasksAggregate",{key:"tomorrow",value:n.tomorrow}),t.commit("setTasksAggregate",{key:"overdue",value:n.overdue}),e.next=26;break;case 23:e.prev=23,e.t0=e["catch"](12),t.dispatch("infoBridge",{text:"Task aggregation: "+e.t0,color:"error"});case 26:return e.prev=26,v={startkey:f,endkey:i,limit:400,reduce:!1,include_docs:!1},e.next=30,window.db.query("offpim/tasks-done",v);case 30:h=e.sent,console.log("Fix this. Tasks aggregation tasks done today test: ",h),t.commit("setTasksAggregate",{key:"doneToday",value:h.rows.length}),t.commit("setTasksAggregate",{key:"initiated",value:!0}),e.next=39;break;case 36:e.prev=36,e.t1=e["catch"](26),t.dispatch("infoBridge",{text:"Task aggregation: "+e.t1,color:"error"});case 39:return e.abrupt("return",!0);case 40:case"end":return e.stop()}}),e,null,[[12,23],[26,36]])})));function t(t){return e.apply(this,arguments)}return t}(),populateOpenProjects:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var o,r,a,s,i,c,l,u,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit("flushOpenProjects"),n.prev=1,n.next=4,window.db.query("offpim/tasks-projects",{reduce:!1,keys:["wait","plan","todo","next","doing"],include_docs:!0});case 4:o=n.sent,r=[],a=!0,s=!1,n.prev=8,c=Object(tt["a"])(o.rows);case 10:return n.next=12,c.next();case 12:return l=n.sent,a=l.done,n.next=16,l.value;case 16:if(u=n.sent,a){n.next=23;break}d=u,r.push(Object(U["a"])({},d.doc));case 20:a=!0,n.next=10;break;case 23:n.next=29;break;case 25:n.prev=25,n.t0=n["catch"](8),s=!0,i=n.t0;case 29:if(n.prev=29,n.prev=30,a||null==c.return){n.next=34;break}return n.next=34,c.return();case 34:if(n.prev=34,!s){n.next=37;break}throw i;case 37:return n.finish(34);case 38:return n.finish(29);case 39:e.commit("addOpenProjects",r),n.next=45;break;case 42:n.prev=42,n.t1=n["catch"](1),e.dispatch("infoBridge",{text:"Fetching open projects: "+n.t1,color:"error"});case 45:case"end":return n.stop()}}),n,null,[[1,42],[8,25,29,39],[30,,34,38]])})))()},getTaskStatuses:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.db.query("offpim/task-status-count",{group:!0});case 3:n=t.sent,n.rows.forEach((function(t){e.commit("setTaskStatuses",t)})),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log("Task status count index missing. If this is the first run. This is completely normal: ",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getTaskPriorities:function(e){window.db.query("offpim/task-priority-count",{group:!0}).then((function(t){t.rows.forEach((function(t){e.commit("setTaskPriorities",t)}))})).catch((function(t){e.dispatch("infoBridge",{text:"Getting task priorities failed"+t,color:"error"})}))},getTasks:function(e,t){var n=t;e.commit("toggleLoader");var o={selector:{productivity:!0,type:"task"},limit:50};if("status"==n.slice(0,6))o.selector.status=n.slice(6);else if("project"==n.slice(0,7))o.selector["$nor"]=[{status:"cancelled"},{status:"done"}],o.selector.project=n.slice(7);else if("priority"==n.slice(0,8)){o.selector["$nor"]=[{status:"cancelled"},{status:"done"}];var r=n.slice(8);o.selector.priority=parseInt(r)}else if("postponed5x"==n.slice(0,11))o.selector["$nor"]=[{status:"cancelled"},{status:"done"}],o.selector.postponed={$gt:5};else if("tomorrow"==n.slice(0,8)){o.selector["$nor"]=[{status:"cancelled"},{status:"done"},{due:null}];var a=new Date,s=(new Date).setDate(a.getDate()+2),i=new Date(s);o.selector.due={$gt:a.toISOString().slice(0,10),$lt:i.toISOString().slice(0,10)}}else{o.selector["$nor"]=[{status:"cancelled"},{status:"done"},{due:null}];var c=new Date;c.setDate(c.getDate()+1),o.selector.due={$lt:c.toISOString().slice(0,10)}}window.db.find(o).then((function(t){e.commit("addDataArray",t.docs)})).catch((function(t){e.commit("toggleLoader"),e.dispatch("infoBridge",{text:"Getting tasks failed: "+t,color:"error"})}))},getTasksTagList:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.db.query("offpim/tasks-tag-count",{group:!0});case 3:n=e.sent,t.commit("setTagList",n),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),t.dispatch("infoBridge",{text:"Failed fetching tasks tag count: "+e.t0,color:"error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},getters:{getOpenProjects:function(e){return e.openProjects},getTaskStatus:function(e){return function(t){console.log(e);var n=e.data.find((function(e){return e._id===t}));return n.status}},getTaskStatuses:function(e){return e.taskStatuses},getTaskPriorities:function(e){return e.taskPriorities},getPostponedTasks:function(e){return e.postponed},getTasksAggregate:function(e){return e.tasksAggregate},getStatusColors:function(e){return e.statusColors},getStatusIcons:function(e){return e.statusIcons}}},ot=nt,rt={state:{},mutations:{},actions:{},getters:{}},at=rt,st={state:{messagesUnreadCount:0},mutations:{setMessagesUnreadCount:function(e,t){e.messagesUnreadCount=t}},actions:{setMessagesUnreadCount:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.db.query("offpim/messages-unread",{limit:100,reduce:!0});case 3:n=e.sent,n.rows.length&&t.commit("setMessagesUnreadCount",n.rows[0].value),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),t.dispatch("infoBridge",{text:"Function messages.js -> setMessagesUnreadCount: "+e.t0,level:"error"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},getters:{getMessagesUnreadCount:function(e){return e.messagesUnreadCount}}},it=st,ct={state:{financialAggregates:{valueAccounts:0},budget:{income:[],expenses:[]},financeTypes:{account:{bank:["checking account","savings account","investment account","individual retirement account","brokerage account"],cash:["wallet","piggy bank","safe"],"credit card":["standard","rewards","prepaid","business"],asset:[],liability:[],investment:[],loan:["mortgage payable"]},transaction:{transaction:["Uncategorized","Clothing","Collectibles","Collecting supplies","Electronics & Software","Groceries","Hobbies","Household appliances","Utilities"]},budget:{income:["salary"],expense:["Clothing","Debt","Food","Giving","Health","Housing","Insurance","Miscellaneous","Personal","Recreation","Savings","Transportation","Utilities"]}}},mutations:{addBudgetDataArray:function(e,t){e.budget[t.type]=t.data},setFinancialAggregates:function(e,t){e.financialAggregates[t.key]=t.value.toFixed(2)}},actions:{getFinancialData:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){var o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit("loaderActive"),t.commit("flushData"),o={selector:{finance:!0,type:n},limit:100},"transaction"==n&&(o.selector.type="transaction"),"account"==n&&(o.selector.type={$in:["bank","cash","credit card","mortgage payable"]}),e.prev=5,e.next=8,window.db.find(o);case 8:r=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](5),t.commit("showSnackbar",{text:e.t0});case 14:t.commit("loaderInactive"),["income","expense"].includes(n)?t.commit("addBudgetDataArray",{type:n,data:r.docs}):t.commit("addDataArray",r.docs);case 16:case"end":return e.stop()}}),e,null,[[5,11]])})));function t(t,n){return e.apply(this,arguments)}return t}(),getFinancialAggregates:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,window.db.query("offpim/finance-totals-sum",{group:!0});case 3:o=n.sent,o.rows.forEach((function(t){e.commit("setFinancialAggregates",t)})),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),t.$store.dispatch("infoBridge",{text:n.t0,color:"error"});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()}},getters:{financeTypes:function(e){return e.financeTypes},getBudget:function(e){return function(t){return e.budget[t]}},getFinancialAggregates:function(e){return e.financialAggregates}}},lt=ct,ut={state:{},mutations:{},actions:{getInventory:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){var o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.commit("flushData"),console.log("Inventory prints this",n),o={selector:{},limit:100},e.next=5,t.dispatch("postData",{url:t.getters.urlMango,data:o});case 5:r=e.sent,t.commit("addDataArray",r.docs);case 7:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},getters:{}},dt=ut,mt=(n("b64b"),n("5363"),n("f309")),ft=n("fcf4"),pt=n("21eb"),gt=n.n(pt);o["a"].use(mt["a"]);var vt=new mt["a"]({theme:{options:{minifyTheme:gt.a,themeCache:{get:function(e){return localStorage.getItem(e)},set:function(e,t){return localStorage.setItem(e,t)}}},themes:{light:{primary:ft["a"].blueGrey.darken1,secondary:ft["a"].teal,accent:ft["a"].shades.black,info:ft["a"].cyan,warning:ft["a"].amber,error:ft["a"].pink,success:ft["a"].lightGreen,anchor:ft["a"].teal},dark:{primary:ft["a"].blueGrey,secondary:ft["a"].teal,accent:ft["a"].red,info:ft["a"].cyan,warning:ft["a"].amber,error:ft["a"].red,success:ft["a"].lightGreen}}}}),ht={state:{currentTheme:null,themeColors:["primary","secondary","info","error","warning","success"],themes:{Vuetify:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"},"Northern Lights":{primary:"#18202b",secondary:"#dee1df",info:"#2f5e6e",error:"#ff6c5a",warning:"#c7882d",success:"#6abd89"},"Northern Lights 2":{primary:"#024788",secondary:"#545d64",info:"#846496",error:"#d56891",warning:"#a07d6a",success:"#6abd89"}}},mutations:{setCurrentTheme:function(e,t){e.currentTheme=t}},actions:{setThemeInLocalStorage:function(e,t){t?(localStorage.setItem("currentTheme",t),e.commit("setCurrentTheme",t),e.dispatch("applyLightTheme",t)):(localStorage.removeItem("currentTheme"),e.commit("setCurrentTheme",null))},applyLightTheme:function(e,t){var n=e.state.themes[t],o=vt.framework.theme.themes.light;Object.keys(n).forEach((function(e){o[e]=n[e]}))},checkThemeSettings:function(e){var t=localStorage.getItem("currentTheme");t&&(e.dispatch("applyLightTheme",t),e.state.currentTheme=t)}},getters:{getThemeColors:function(e){return e.themeColors},getThemes:function(e){return e.themes}}},bt=ht;o["a"].use(We["a"]);var kt=new We["a"].Store({state:{data:[],loaderActive:!1,buttonFormNewHidden:!0,remoteDBIsOnline:!1,localSettings:{liveSync:!1,retrySync:!1},remoteDBSettings:{name:null,auth:{username:!1,password:!1}},remoteDBInfo:{},localDBInfo:{},dbConnectionEstablished:!1,dbConnectionDialog:!1,navItems:[],deleted:[],snackbar:{visible:!1,text:null,timeout:4e3,multiline:!1,color:""},totals:{},tagList:[],appBarTabs:[],leftDrawer:!1,rightDrawer:!1,rawDocumentViewerDialog:!1,rawDocumentViewerDocument:{_id:null},dialogItemDetailed:!1,selectedDoc:{},sessionLogs:[]},actions:Ye,mutations:Qe,getters:Ze,modules:{notes:et,tasks:ot,logs:at,messages:it,finances:lt,inventory:dt,themes:bt}}),wt=n("9483");Object(wt["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var yt=n("5d16");O["a"].plugin(yt["default"]),window.db=new O["a"]("vault"),window.remoteDB=null,o["a"].config.productionTip=!1,new o["a"]({router:Ke,store:kt,vuetify:vt,render:function(e){return e(je)}}).$mount("#app")},"6ae0":function(e,t,n){var o=n("1cda");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var r=n("499e").default;r("eb99ca40",o,!0,{sourceMap:!1,shadowMode:!1})},"6c29":function(e,t,n){"use strict";n("7db0"),n("fb6a");var o=n("5530"),r=(n("96cf"),n("1da1")),a=n("668b");t["a"]={methods:{setFieldGeneric:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.db.get(t._id);case 3:n=e.sent,n[t.field]=t.value,this.putDoc(n),this.$emit("set-doc"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),this.$store.dispatch("infoBridge",{color:"error",text:e.t0,level:"error"});case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}(),getDoc:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],e.prev=1,e.next=4,window.db.get(t);case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e["catch"](1),a={color:"error",text:e.t0,level:"error"},404===e.t0.status&&(n=!0,a=Object(o["a"])(Object(o["a"])({},a),{},{deleted:!0,_id:"document deleted"})),n&&(a.silent=!0),this.$store.dispatch("infoBridge",a),e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(t){return e.apply(this,arguments)}return t}(),putDoc:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,o,r,a,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=s.length>1&&void 0!==s[1]&&s[1],e.prev=1,o="silent"==n,!t._id){e.next=9;break}return e.next=6,window.db.put(t);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,window.db.post(t);case 11:e.t0=e.sent;case 12:if(r=e.t0,!r.ok){e.next=19;break}return a=n||(t._id?"Document updated":"Document created"),o||this.$store.dispatch("infoBridge",{color:"success",text:a}),e.abrupt("return",r);case 19:o||this.$store.dispatch("infoBridge",{color:"error",text:"Document update failed"+r,level:"error"});case 20:e.next=26;break;case 22:return e.prev=22,e.t1=e["catch"](1),this.$store.dispatch("infoBridge",{color:"error",text:e.t1,level:"error"}),e.abrupt("return",e.t1);case 26:case"end":return e.stop()}}),e,this,[[1,22]])})));function t(t){return e.apply(this,arguments)}return t}(),deleteDoc:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.db.get(t);case 3:return o=e.sent,o._deleted=!0,e.next=7,this.putDoc(o);case 7:r=e.sent,this.$store.commit("addDeleted",t),this.$store.dispatch("infoBridge",{text:"Document deleted",color:"info",error:t+" Doc delete result: "+r}),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),this.dispatch("infoBridge",{color:"error",text:"Deleting document failed: ",level:"error",error:e.t0}),n=e.t0;case 16:return e.next=18,n;case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e,this,[[0,12]])})));function t(t){return e.apply(this,arguments)}return t}(),setFieldDate:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,o,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.db.get(t._id);case 3:n=e.sent,"task"==n.type&&"due"==t.field&&n.postponed++,o=n[t.field],"undefined"==typeof o&&(o="2020-01-01T00:00:00.000Z"),r=new Date(o),a=new Date(t.value),r.setFullYear(a.getFullYear()),r.setMonth(a.getMonth()),r.setDate(a.getDate()),n[t.field]=r.toISOString(),this.putDoc(n),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](0),this.$store.dispatch("infoBridge",{color:"error",text:e.t0,level:"error"});case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(t){return e.apply(this,arguments)}return t}(),setFieldNull:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.db.get(t._id);case 3:n=e.sent,n[t.field]=null,this.putDoc(n),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$store.dispatch("infoBridge",{color:"error",text:e.t0,level:"error"});case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}(),setFieldTime:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,o,r,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.db.get(t._id);case 2:n=e.sent,o=n[t.field],"undefined"==typeof o&&(r=new Date,o=r.toISOString()),a=new Date(o),s=a.getTimezoneOffset()/60,i=parseInt(t.value.slice(0,2)),a.setHours(i-s),a.setMinutes(t.value.slice(3,5)),a.setMilliseconds(0),a.setSeconds(0),n[t.field]=a.toISOString(),this.putDoc(n);case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getMango:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.commit("loaderActive"),e.prev=1,e.next=4,window.db.find(t);case 4:return n=e.sent,this.$store.commit("loaderInactive"),window.db.explain(t).then((function(e){console.log("Mango query explained: ",e)})),e.abrupt("return",n);case 10:e.prev=10,e.t0=e["catch"](1),this.$store.dispatch("infoBridge",{color:"error",text:e.t0,level:"error"});case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(t){return e.apply(this,arguments)}return t}(),getQuery:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,o){var r,s,i,c,l,u,d,m,f,p,g,v,h=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=h.length>3&&void 0!==h[3]&&h[3],s=this,s.$store.commit("loaderActive"),i={limit:100,reduce:!1,include_docs:!1},"offpim/contacts-all"==t&&(i.limit=1e3),"offpim/logs-start-days"==t&&(i.descending=!0,i.limit=30,i.group=!0),n&&(i.startkey=n,i.endkey=o),r&&(i.include_docs=!0),c=[],e.prev=9,e.next=12,window.db.query(t,i);case 12:l=e.sent,u=!0,d=!1,e.prev=15,f=Object(a["a"])(l.rows);case 17:return e.next=19,f.next();case 19:return p=e.sent,u=p.done,e.next=23,p.value;case 23:if(g=e.sent,u){e.next=30;break}v=g,r?c.push(v.doc):c.push({_id:v.id});case 27:u=!0,e.next=17;break;case 30:e.next=36;break;case 32:e.prev=32,e.t0=e["catch"](15),d=!0,m=e.t0;case 36:if(e.prev=36,e.prev=37,u||null==f.return){e.next=41;break}return e.next=41,f.return();case 41:if(e.prev=41,!d){e.next=44;break}throw m;case 44:return e.finish(41);case 45:return e.finish(36);case 46:return s.$store.commit("loaderInactive"),e.abrupt("return",c);case 50:e.prev=50,e.t1=e["catch"](9),this.$store.dispatch("infoBridge",{color:"error",text:e.t1,level:"error"});case 53:case"end":return e.stop()}}),e,this,[[9,50],[15,32,36,46],[37,,41,45]])})));function t(t,n,o){return e.apply(this,arguments)}return t}()}}},a694:function(e){e.exports=JSON.parse('{"_id":"_design/offpim","version":20200609,"views":{"messages-tag-count":{"reduce":"_count","map":"function (doc) {\\n  if (doc[\\"@type\\"] == \\"Message\\") {\\n    function emitKeyword(tag) {\\n        emit(tag);\\n    }\\n    doc.keywords.forEach(emitKeyword);\\n    if (doc.keywords.length == 0) {\\n      emit(\\"untagged\\");\\n    }\\n  }\\n}"},"logs-tag-count":{"reduce":"_count","map":"function (doc) {\\n  if (doc[\\"@type\\"] == \\"Event\\") {\\n    function emitTag(tag) {\\n        emit(tag);\\n    }\\n    doc.keywords.forEach(emitTag);\\n    if (doc.keywords.length == 0) {\\n      emit(\\"untagged\\");\\n    }\\n  }\\n}"},"note-tag-count":{"reduce":"_count","map":"function (doc) {\\n  //if (doc.productivity && doc.type == \\"note\\" && doc.archived != true) {\\n  if (doc.productivity && doc.type == \\"note\\") {\\n    //emit(doc.tags, 1);\\n    function emitTag(tag) {\\n        emit(tag);\\n        //emit(tag, 1);\\n        //emit(tag, tag);\\n    }\\n    //doc.tags && doc.tags.forEach(emitTag);\\n    doc.tags.forEach(emitTag);\\n    if (doc.tags.length == 0) {\\n      emit(\\"No tag\\");\\n      //emit(\\"No tag\\", 1);\\n    }\\n  }\\n}"},"task-status-count":{"reduce":"_count","map":"function (doc) {\\n  if (doc.productivity && doc.type == \\"task\\") {\\n    emit(doc.status);\\n  }\\n}"},"totals":{"reduce":"_count","map":"function (doc) {\\n  if (doc.message) {\\n    emit(\\"messages\\");\\n  }\\n  if (doc.logbook) {\\n    emit(\\"logs\\");\\n  }\\n  if (doc.productivity && doc.type == \\"task\\") {\\n    emit(\\"tasks\\");\\n  }\\n}"},"task-priority-count":{"reduce":"_count","map":"function (doc) {\\n  if (doc.productivity && doc.type == \\"task\\" && doc.status != \'done\' && doc.status != \'cancelled\') {\\n    emit(doc.priority);\\n  }\\n}"},"logs-start-months":{"reduce":"_count","map":"function (doc) {\\n  if (doc[\\"@type\\"] == \\"Event\\") {\\n    var d = doc.startDate.slice(0,4);\\n    var m = doc.startDate.slice(5,7);\\n    var x = d + \'-\' + m;\\n    emit(x);\\n  }\\n}"},"logs-start-years":{"reduce":"_count","map":"function (doc) {\\n  if (doc[\\"@type\\"] == \\"Event\\") {\\n    var d = doc.startDate.slice(0,4);\\n    emit(d);\\n  }\\n}"},"logs-start-days":{"reduce":"_count","map":"function (doc) {\\n  if (doc[\\"@type\\"] == \\"Event\\") {\\n    var y = doc.startDate.slice(0,4);\\n    var m = doc.startDate.slice(5,7);\\n    var d = doc.startDate.slice(8,10);\\n    var x = [y, m, d].join(\'-\');\\n    emit(x);\\n  }\\n}"},"finance-totals-sum":{"reduce":"_sum","map":"function (doc) {\\n  \\n  if (doc.finance) {\\n    if (doc.balance) {\\n      emit(\\"valueAccounts\\", doc.balance);\\n    }\\n  }\\n}"},"tasks-tag-count":{"reduce":"_count","map":"function (doc) {\\n  if (doc.productivity && doc.type == \\"task\\") {\\n    function emitTag(tag) {\\n        emit(tag);\\n    }\\n    doc.tags.forEach(emitTag);\\n    if (doc.tags.length == 0) {\\n      emit(\\"untagged\\");\\n    }\\n  }\\n}"},"tasks-due":{"reduce":"_count","map":"function (doc) {\\n  if (doc.productivity \\n      && doc.due \\n      && doc.type === \\"task\\" \\n      && doc.status != \'done\' \\n      && doc.status != \'cancelled\') {\\n    emit(doc.due);\\n  }\\n}"},"tasks-done":{"reduce":"_count","map":"function (doc) {\\n  if (doc.productivity \\n      && doc.type === \\"task\\" \\n      && doc.status === \'done\') {\\n    emit(doc.end);\\n  }\\n}"},"messages-unread":{"reduce":"_count","map":"function (doc) {\\n  if (doc[\\"@type\\"] == \\"Message\\" && !doc.dateRead) {\\n    emit(doc.dateRead);\\n  }\\n}"},"tasks-projects":{"reduce":"_count","map":"function (doc) {\\n  if (doc.productivity \\n      && doc.type === \\"project\\") {\\n    emit(doc.status);\\n  }\\n}"},"contacts-all":{"map":"function (doc) {\\n  if (doc[\'@type\'] == \'Person\' || doc[\'@type\'] == \'Organization\') {\\n    emit(doc._id);\\n  }\\n}"}},"language":"javascript"}')},cf6b:function(e,t,n){"use strict";var o=n("6ae0"),r=n.n(o);r.a},e022:function(e,t,n){"use strict";n("b680");t["a"]={computed:{isSmallScreen:function(){return this.$vuetify.breakpoint.smAndDown}},methods:{formatBytes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=1024,o=t<0?0:t,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,a)).toFixed(o))+" "+r[a]}}}},eb11:function(e){e.exports=JSON.parse('{"_id":"_design/offpim_mango_indexes","version":20200501,"language":"query","views":{"created-json-index":{"map":{"fields":{"created":"asc"},"partial_filter_selector":{}},"reduce":"_count","options":{"def":{"fields":["created"]}}},"start-json-index":{"map":{"fields":{"start":"asc"},"partial_filter_selector":{}},"reduce":"_count","options":{"def":{"fields":["start"]}}}}}')},ed46:function(e,t,n){var o=n("24fb");t=o(!1),t.push([e.i,".jsonValid[data-v-755b58de]{background-color:azure!important}.jsonInvalid[data-v-755b58de],.jsonValid[data-v-755b58de]{font-family:monospace!important}.jsonInvalid[data-v-755b58de]{background-color:salmon!important}",""]),e.exports=t}});